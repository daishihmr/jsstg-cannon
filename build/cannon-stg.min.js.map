{"version":3,"file":"cannon-stg.min.js","sources":["../scripts/_pre.js","../scripts/main.js","../scripts/sound.js","../scripts/scenes/gamescene.js","../scripts/scenes/menudialog.js","../scripts/scenes/titlescene.js","../scripts/elements/background.js","../scripts/elements/enemy.js","../scripts/elements/explode.js","../scripts/elements/fighter.js","../scripts/elements/shockwave.js","../scripts/elements/shot.js","../scripts/elements/spark.js","../scripts/elements/terrain.js","../scripts/utils/collisionhelper.js"],"names":["cannon","app","SC_W","SC_H","FIGHTER_RADIUS","FIGHTER_SPEED","SHOT_SPEED","HEAT_BY_SHOT","optionSettings","seVolume","bgmVolume","tm","display","Label","default","fontFamily","ASSETS","fighter","aura","shot","backfire","explode0","explode1","shockwave","spark","sounds/extend","sounds/reload","sounds/shot","Math","PHI","util","Script","loadStats","main","Application","enableStats","fps","resize","fitWindow","replaceScene","ui","LoadingScene","width","height","assets","nextScene","GameScene","tester","document","createElement","style","innerHTML","body","appendChild","before","offsetWidth","timeout","checkLoadFont","removeChild","run","setTimeout","define","superClass","init","canvasId","this","superInit","keyboard","element","addEventListener","e","keyCode","preventDefault","playSe","soundName","asset","Manager","get","clone","setVolume","play","playBgm","fromJSON","children","backgroundLayer","type","bg","terrainLayer","ceil","CEIL","floor","FLOOR","playerLayer","player","scene","enemyLayer","bulletLayer","update","forEach","t","scroll","some","isHit","damage","title","menu","descriptions","defaultIndex","menuDesctiptions","showExit","screenWidth","screenHeight","backgroundColor","boxColor","cursorColor","on","setInteractive","x","y","onpointingend","that","pushScene","MenuDialog","value","startGame","graphics","Canvas","setFillStyle","fillRect","originX","originY","texture","setBoundingType","radius","hp","setPosition","setBlendMode","setFrameIndex","frame","frameIndex","remove","setScale","scaleY","beforeX","beforeY","roll","heat","gunPosition","scaleX","kb","keyDirection","getKeyDirection","position","add","mul","clamp","getKeyDown","Shot","addChildTo","parent","max","console","log","f","ShockWave","Spark","setRotation","rand","data","setOrigin","lines","i","len","length","push","a","geom","Vector2","b","strokeStyle","draw","canvas","context","lineWidth","beginPath","line","moveTo","lineTo","stroke","target","c","CollisionHelper","isHitCircleLine","circle","Vec2","s","sub","radSq","lengthSquared","abs","cross","dot"],"mappings":"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"}