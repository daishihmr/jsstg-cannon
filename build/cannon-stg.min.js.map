{"version":3,"file":"cannon-stg.min.js","sources":["../scripts/_pre.js","../scripts/main.js","../scripts/sound.js","../scripts/scenes/gamescene.js","../scripts/scenes/menudialog.js","../scripts/scenes/titlescene.js","../scripts/elements/background.js","../scripts/elements/enemy.js","../scripts/elements/explode.js","../scripts/elements/fighter.js","../scripts/elements/shockwave.js","../scripts/elements/shot.js","../scripts/elements/spark.js","../scripts/elements/spark2.js","../scripts/elements/terrain.js","../scripts/utils/collisionhelper.js"],"names":["cannon","app","SC_W","SC_H","FIGHTER_RADIUS","FIGHTER_SPEED","SHOT_SPEED","HEAT_BY_SHOT","optionSettings","seVolume","bgmVolume","tm","display","Label","default","fontFamily","ASSETS","fighter","aura","shot","backfire","explode0","explode1","shockwave","spark","spark2","sounds/extend","sounds/reload","sounds/shot","Math","PHI","util","Script","loadStats","main","Application","enableStats","fps","resize","fitWindow","replaceScene","ui","LoadingScene","width","height","assets","nextScene","GameScene","tester","document","createElement","style","innerHTML","body","appendChild","before","offsetWidth","timeout","checkLoadFont","removeChild","run","setTimeout","define","superClass","init","canvasId","this","superInit","keyboard","element","addEventListener","e","keyCode","preventDefault","playSe","soundName","asset","Manager","get","clone","setVolume","play","playBgm","fromJSON","children","backgroundLayer","type","bg","terrainLayer","ceil","CEIL","floor","FLOOR","playerLayer","player","scene","enemyLayer","bulletLayer","update","terrains","forEach","t","scroll","some","isHit","damage","Shot","ACTIVES","title","menu","descriptions","defaultIndex","menuDesctiptions","showExit","screenWidth","screenHeight","backgroundColor","boxColor","cursorColor","on","setInteractive","x","y","onpointingend","that","pushScene","MenuDialog","value","startGame","graphics","Canvas","setFillStyle","fillRect","originX","originY","texture","setBoundingType","radius","hp","setPosition","setBlendMode","setFrameIndex","frame","frameIndex","remove","setScale","scaleY","beforeX","beforeY","roll","heat","gunPosition","scaleX","kb","keyDirection","getKeyDirection","position","add","mul","clamp","getKeyDown","addChildTo","parent","max","console","log","f","boundingType","ShockWave","Spark","setRotation","rand","Spark2","push","erase","setOrigin","data","lines","i","len","length","a","geom","Vector2","b","strokeStyle","draw","canvas","context","lineWidth","beginPath","line","moveTo","lineTo","stroke","target","c","CollisionHelper","isHitCircleLine","circle","Vec2","s","sub","radSq","lengthSquared","abs","cross","dot"],"mappings":"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"}